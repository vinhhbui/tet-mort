<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>H·ª©ng L√¨ X√¨ - T·∫øt 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            /* N·ªÅn ƒë·ªè sang tr·ªçng v·ªõi h·ªça ti·∫øt ch·∫•m bi m·ªù (gi·ªëng ƒë·ªìng xu) */
            background-color: #a00000;
            background-image: radial-gradient(#d60000 15%, transparent 16%), radial-gradient(#d60000 15%, transparent 16%);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
            font-family: 'Nunito', sans-serif;
            touch-action: none; /* Quan tr·ªçng: Ch·∫∑n cu·ªôn trang tr√™n mobile */
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- M√†n h√¨nh Chung --- */
        .screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            color: #ffeb3b;
            font-size: 3rem;
            margin: 0 0 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            text-align: center;
            padding: 0 20px;
        }

        p {
            color: #fff;
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 20px;
        }

        /* --- N√∫t b·∫•m chung --- */
        .btn-main {
            background: linear-gradient(to bottom, #ffeb3b, #fbc02d);
            border: 2px solid #fff;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.5rem;
            color: #d50000;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: transform 0.2s;
            animation: pulse 2s infinite;
        }
        .btn-main:active { transform: scale(0.95); }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 235, 59, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 235, 59, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 235, 59, 0); }
        }

        /* --- M√†n h√¨nh Start --- */
        #start-screen {
            display: flex;
            background: rgba(0,0,0,0.6); /* L·ªõp ph·ªß t·ªëi ƒë·ªÉ n·ªïi b·∫≠t text */
            backdrop-filter: blur(5px);
        }
        
        .tutorial {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.3);
            margin-bottom: 30px;
        }

        /* --- M√†n h√¨nh Game --- */
        #game-screen {
            display: none;
            z-index: 5;
        }
        
        #score-board {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #fff;
            color: #d50000;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: 2px solid #ffeb3b;
        }

        #player {
            position: absolute;
            bottom: 30px;
            width: 80px; /* To h∆°n cho d·ªÖ nh√¨n tr√™n mobile */
            height: 80px;
            font-size: 70px;
            line-height: 80px;
            text-align: center;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3));
            transition: left 0.05s linear; /* Di chuy·ªÉn m∆∞·ª£t h∆°n */
            z-index: 6;
        }

        .item {
            position: absolute;
            font-size: 45px; /* V·∫≠t ph·∫©m to d·ªÖ nh√¨n */
            z-index: 5;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
        }

        /* --- M√†n h√¨nh Win (T·ªè t√¨nh) --- */
        #win-screen {
            background: rgba(0,0,0,0.85);
            z-index: 20;
        }

        .card {
            background: #fff;
            width: 85%;
            max-width: 400px;
            padding: 30px 20px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 20px #ffeb3b;
            position: relative;
            border: 2px solid #d50000;
        }
        
        .card h2 {
            color: #d50000;
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            margin-top: 0;
        }
        
        .card p {
            color: #333;
            font-size: 1.3rem;
            margin-bottom: 40px;
        }

        .btn-group {
            position: relative;
            height: 60px;
            width: 100%;
        }

        .btn-option {
            padding: 10px 25px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-yes {
            background: #d50000;
            color: #fff;
            position: absolute;
            left: 20%;
            transform: translateX(-50%);
            z-index: 22;
        }
        
        .btn-no {
            background: #e0e0e0;
            color: #555;
            position: absolute;
            right: 20%;
            transform: translateX(50%);
            z-index: 22;
        }

        /* Hoa mai r∆°i background */
        .flower-bg {
            position: absolute;
            top: -50px;
            font-size: 20px;
            animation: fall linear infinite;
            z-index: 1;
            opacity: 0.6;
        }
        @keyframes fall {
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }
        
        #final-msg {
            display: none; 
            margin-top: 20px;
        }
        #final-msg img {
            width: 100%;
            border-radius: 10px;
            margin-top: 10px;
            border: 2px solid #ffeb3b;
        }

    </style>
</head>
<body>

    <div id="start-screen" class="screen" style="display: flex;">
        <div style="font-size: 4rem; margin-bottom: 10px;">üßß</div>
        <h1>H√°i L·ªôc ƒê·∫ßu Xu√¢n</h1>
        <div class="tutorial">
            <p>Di chuy·ªÉn t√∫i üëú ƒë·ªÉ h·ª©ng qu√†!</p>
            <p>üßß +1 ƒëi·ªÉm | üåº +2 ƒëi·ªÉm | üò¢ -2 ƒëi·ªÉm</p>
            <p style="color: #ffeb3b; font-weight: bold;">M·ª•c ti√™u: 20 ƒëi·ªÉm</p>
        </div>
        <button class="btn-main" onclick="startGame()">V√†o Game</button>
    </div>

    <div id="game-screen" class="screen">
        <div id="score-board">ƒêi·ªÉm: <span id="score">0</span>/20</div>
        <div id="player">üëú</div>
    </div>

    <div id="win-screen" class="screen">
        <div class="card">
            <h2>Ch√∫c M·ª´ng NƒÉm M·ªõi!</h2>
            <p id="q-text">Game th·∫Øng r·ªìi, gi·ªù l√†m "ng∆∞·ªùi iu" tui nhen? üå∏</p>
            
            <div class="btn-group" id="btn-area">
                <button class="btn-option btn-yes" id="btnYes">ƒê·ªìng √≠</button>
                <button class="btn-option btn-no" id="btnNo">Hong</button>
            </div>

            <div id="final-msg">
                <p style="color: #d50000; font-weight: bold; font-size: 1.4rem;">Ch·ªët ƒë∆°n! Y√™u emmm ‚ù§Ô∏è</p>
                <img src="https://media.giphy.com/media/l4pTfx2qLszoacZRS/giphy.gif" alt="Happy">
            </div>
        </div>
    </div>

    <script>
        /* --- LOGIC GAME --- */
        const player = document.getElementById('player');
        const gameScreen = document.getElementById('game-screen');
        const scoreEl = document.getElementById('score');
        let score = 0;
        let isRunning = false;
        let spawnTimer, gameLoopTimer;

        // X·ª≠ l√Ω di chuy·ªÉn (H·ªó tr·ª£ c·∫£ Touch v√† Mouse)
        function moveHandler(clientX) {
            if (!isRunning) return;
            const containerWidth = window.innerWidth;
            let x = clientX - 40; // Tr·ª´ ƒëi m·ªôt n·ª≠a chi·ªÅu r·ªông t√∫i
            
            // Gi·ªõi h·∫°n bi√™n
            if (x < 0) x = 0;
            if (x > containerWidth - 80) x = containerWidth - 80;
            
            player.style.left = x + 'px';
        }

        // S·ª± ki·ªán Touch (Mobile)
        document.addEventListener('touchmove', (e) => {
            if (isRunning) {
                e.preventDefault(); // Ch·∫∑n cu·ªôn trang
                moveHandler(e.touches[0].clientX);
            }
        }, { passive: false });

        // S·ª± ki·ªán Mouse (PC)
        document.addEventListener('mousemove', (e) => {
            if (isRunning) moveHandler(e.clientX);
        });

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            gameScreen.style.display = 'block'; // Hi·ªÉn th·ªã m√†n h√¨nh game
            score = 0;
            scoreEl.innerText = score;
            isRunning = true;
            
            spawnTimer = setInterval(spawnItem, 700); // T·ªëc ƒë·ªô r∆°i
            requestAnimationFrame(gameLoop);
        }

        function spawnItem() {
            if (!isRunning) return;
            const item = document.createElement('div');
            item.classList.add('item');
            
            const rand = Math.random();
            if (rand < 0.6) { item.innerText = 'üßß'; item.dataset.val = 1; }
            else if (rand < 0.85) { item.innerText = 'üåº'; item.dataset.val = 2; }
            else { item.innerText = 'üò¢'; item.dataset.val = -2; }

            // V·ªã tr√≠ ng·∫´u nhi√™n
            item.style.left = Math.random() * (window.innerWidth - 50) + 'px';
            item.style.top = '-60px';
            gameScreen.appendChild(item);

            // R∆°i xu·ªëng
            let y = -60;
            const speed = Math.random() * 3 + 4; // T·ªëc ƒë·ªô r∆°i

            function fall() {
                if (!isRunning) { item.remove(); return; }
                y += speed;
                item.style.top = y + 'px';

                // Check va ch·∫°m
                const pRect = player.getBoundingClientRect();
                const iRect = item.getBoundingClientRect();

                if (
                    iRect.bottom >= pRect.top + 20 &&
                    iRect.right >= pRect.left + 10 &&
                    iRect.left <= pRect.right - 10 &&
                    iRect.top <= pRect.bottom
                ) {
                    // ƒÇn ƒëi·ªÉm
                    updateScore(parseInt(item.dataset.val));
                    item.remove();
                    return;
                }

                if (y > window.innerHeight) {
                    item.remove();
                    return;
                }
                requestAnimationFrame(fall);
            }
            requestAnimationFrame(fall);
        }

        function updateScore(val) {
            score += val;
            if (score < 0) score = 0;
            scoreEl.innerText = score;
            
            if (score >= 20) winGame();
        }

        function gameLoop() {
            if (isRunning) requestAnimationFrame(gameLoop);
        }

        function winGame() {
            isRunning = false;
            clearInterval(spawnTimer);
            
            // X√≥a item th·ª´a
            document.querySelectorAll('.item').forEach(e => e.remove());
            
            gameScreen.style.display = 'none';
            document.getElementById('win-screen').style.display = 'flex';
            
            // T·∫°o hoa n·ªÅn cho l√£ng m·∫°n
            setInterval(createFlower, 300);
        }

        /* --- LOGIC T·ªé T√åNH --- */
        const btnNo = document.getElementById('btnNo');
        const btnYes = document.getElementById('btnYes');
        const card = document.querySelector('.card');
        let scale = 1;
        let noClickCount = 0;

        // H√†m nh·∫£y n√∫t Hong
        function jumpBtn() {
            // T√≠nh to√°n gi·ªõi h·∫°n trong khung Card
            const cardRect = card.getBoundingClientRect();
            
            // Random v·ªã tr√≠ m·ªõi (t∆∞∆°ng ƒë·ªëi so v·ªõi viewport)
            // ƒê·ªÉ n√∫t kh√¥ng nh·∫£y ra kh·ªèi m√†n h√¨nh, ta gi·ªõi h·∫°n trong kho·∫£ng m√†n h√¨nh
            const maxX = window.innerWidth - btnNo.offsetWidth - 20;
            const maxY = window.innerHeight - btnNo.offsetHeight - 20;
            
            const randomX = Math.random() * maxX;
            const randomY = Math.random() * maxY;

            btnNo.style.position = 'fixed'; // Chuy·ªÉn sang fixed ƒë·ªÉ bay t·ª± do
            btnNo.style.left = randomX + 'px';
            btnNo.style.top = randomY + 'px';
            btnNo.style.transform = 'none'; // B·ªè transform center c≈©
        }

        // X·ª≠ l√Ω PC (Hover)
        btnNo.addEventListener('mouseover', () => {
            if (noClickCount >= 1) jumpBtn();
        });

        // X·ª≠ l√Ω Mobile (TouchStart - v·ª´a ch·∫°m l√† nh·∫£y)
        btnNo.addEventListener('touchstart', (e) => {
            if (noClickCount >= 1) {
                e.preventDefault(); // Kh√¥ng cho click
                jumpBtn();
            }
        });

        btnNo.addEventListener('click', (e) => {
            noClickCount++;
            scale += 0.3;
            btnYes.style.transform = `translateX(-50%) scale(${scale})`; // Gi·ªØ cƒÉn gi·ªØa
            
            const txt = ["Hong √°?", "K√¨ z·∫≠y?", "ƒê·ª´ng m√† :(", "B·∫•m b√™n kia!"];
            if (noClickCount < 4) btnNo.innerText = txt[noClickCount];
            
            if (noClickCount >= 1) {
                jumpBtn(); // Nh·∫£y ngay l·∫ßn b·∫•m ƒë·∫ßu ti√™n
            }
        });

        btnYes.addEventListener('click', () => {
            document.getElementById('q-text').style.display = 'none';
            document.getElementById('btn-area').style.display = 'none';
            document.getElementById('final-msg').style.display = 'block';
            
            // B·∫Øn tim/hoa nhi·ªÅu h∆°n
            for(let i=0; i<30; i++) setTimeout(createFlower, i*100);
        });

        function createFlower() {
            const f = document.createElement('div');
            f.innerText = Math.random() > 0.5 ? 'üå∏' : '‚ù§Ô∏è';
            f.classList.add('flower-bg');
            f.style.left = Math.random() * 100 + 'vw';
            f.style.animationDuration = Math.random() * 3 + 2 + 's';
            document.body.appendChild(f);
            setTimeout(() => f.remove(), 5000);
        }
    </script>
</body>
</html>